{"version":3,"file":"locationsMap.js","sources":["../modules/locationsMap.js"],"sourcesContent":["// Imports\r\nimport { errorWrapper } from '../utils/handleErrors.js';\r\n\r\n/**\r\n * Adds map to the UI\r\n * @param {String} mapLocations JSON string of maps\r\n * @param {String} mapboxKey Mapbox Key\r\n */\r\nconst showLocationMap = (mapLocations, mapboxKey) => {\r\n  return errorWrapper(() => {\r\n    // check is we have mapBoxKey\r\n    if (!mapLocations || !mapboxKey)\r\n      throw new Error('Map locations or public key missing');\r\n\r\n    // Get locations\r\n    const locations = JSON.parse(mapLocations);\r\n\r\n    if (!locations) throw new Error('Could not parse map location correctly');\r\n\r\n    // Access Token\r\n    mapboxgl.accessToken = mapboxKey;\r\n\r\n    // Init Map\r\n    const map = new mapboxgl.Map({\r\n      container: 'map',\r\n      style: 'mapbox://styles/marknjo/cks5s76x25pts18o4tjpaqor0',\r\n      scrollZoom: false,\r\n    });\r\n\r\n    // Set Map bounds\r\n    const bounds = new mapboxgl.LngLatBounds();\r\n\r\n    // Define markers and popup\r\n    locations.forEach(loc => {\r\n      // Create a map pin element\r\n      const marker = document.createElement('div');\r\n      marker.className = 'marker';\r\n\r\n      // Add a marker on the map\r\n      new mapboxgl.Marker({\r\n        element: marker,\r\n        anchor: 'bottom',\r\n      })\r\n        .setLngLat(loc.coordinates)\r\n        .addTo(map);\r\n\r\n      // Add a popup on the map\r\n      new mapboxgl.Popup({ offset: 30 })\r\n        .setLngLat(loc.coordinates)\r\n        .setHTML(`<p>Day ${loc.day}: ${loc.description} </p>`)\r\n        .addTo(map);\r\n\r\n      bounds.extend(loc.coordinates);\r\n    });\r\n\r\n    // Place map on teh DOM\r\n    map.fitBounds(bounds, {\r\n      padding: {\r\n        top: 200,\r\n        bottom: 150,\r\n        right: 100,\r\n        left: 100,\r\n      },\r\n    });\r\n  });\r\n};\r\n\r\n// Export\r\nexport default showLocationMap;\r\n"],"names":[],"mappings":";AAQK,MAAC,kBAAkB,CAAC,cAAc,cAAc;AACnD,SAAO,aAAa,MAAM;AAExB,QAAI,CAAC,gBAAgB,CAAC;AACpB,YAAM,IAAI,MAAM,qCAAqC;AAGvD,UAAM,YAAY,KAAK,MAAM,YAAY;AAEzC,QAAI,CAAC;AAAW,YAAM,IAAI,MAAM,wCAAwC;AAGxE,aAAS,cAAc;AAGvB,UAAM,MAAM,IAAI,SAAS,IAAI;AAAA,MAC3B,WAAW;AAAA,MACX,OAAO;AAAA,MACP,YAAY;AAAA,IAClB,CAAK;AAGD,UAAM,SAAS,IAAI,SAAS;AAG5B,cAAU,QAAQ,SAAO;AAEvB,YAAM,SAAS,SAAS,cAAc,KAAK;AAC3C,aAAO,YAAY;AAGnB,UAAI,SAAS,OAAO;AAAA,QAClB,SAAS;AAAA,QACT,QAAQ;AAAA,MAChB,CAAO,EACE,UAAU,IAAI,WAAW,EACzB,MAAM,GAAG;AAGZ,UAAI,SAAS,MAAM,EAAE,QAAQ,GAAE,CAAE,EAC9B,UAAU,IAAI,WAAW,EACzB,QAAQ,UAAU,IAAI,QAAQ,IAAI,kBAAkB,EACpD,MAAM,GAAG;AAEZ,aAAO,OAAO,IAAI,WAAW;AAAA,IACnC,CAAK;AAGD,QAAI,UAAU,QAAQ;AAAA,MACpB,SAAS;AAAA,QACP,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,MAAM;AAAA,MACP;AAAA,IACP,CAAK;AAAA,EACL,CAAG;AACH;;"}