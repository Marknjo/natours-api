{"version":3,"file":"updateUser.js","sources":["../modules/updateUser.js"],"sourcesContent":["import { asyncErrorWrapper } from '../utils/handleErrors';\r\nimport httpRequestsHelper, {\r\n  handleHttpErrors,\r\n} from '../utils/httpRequestsHelper';\r\nimport redirectTo from '../utils/redirectsHelper';\r\n\r\nconst updateUser = formEl => {\r\n  asyncErrorWrapper(async () => {\r\n    // get form data\r\n    const formData = new FormData(formEl);\r\n    const name = formData.get('name');\r\n    const email = formData.get('email');\r\n\r\n    // Validata user inputs\r\n    if (!name || !email) {\r\n      throw new Error('Name and Email requred in the field.');\r\n    }\r\n\r\n    const url = '/api/v1/users/update-me';\r\n\r\n    formData.delete(name);\r\n\r\n    // send form data\r\n    const response = await httpRequestsHelper(url, {\r\n      sendPlainResponse: true,\r\n      submitData: formData,\r\n      requestMethod: 'PATCH',\r\n      dataType: 'attachment',\r\n    });\r\n\r\n    /// susccess response\r\n    await handleHttpErrors(response, 'Could not update form data!');\r\n\r\n    // If no error\r\n    redirectTo('/sys-admin/profile', {\r\n      redirectOption: 'pageRefresh',\r\n    });\r\n  });\r\n};\r\n\r\nexport default updateUser;\r\n"],"names":["httpRequestsHelper"],"mappings":";;AAMK,MAAC,aAAa,YAAU;AAC3B,oBAAkB,YAAY;AAE5B,UAAM,WAAW,IAAI,SAAS,MAAM;AACpC,UAAM,OAAO,SAAS,IAAI,MAAM;AAChC,UAAM,QAAQ,SAAS,IAAI,OAAO;AAGlC,QAAI,CAAC,QAAQ,CAAC,OAAO;AACnB,YAAM,IAAI,MAAM,sCAAsC;AAAA,IACvD;AAED,UAAM,MAAM;AAEZ,aAAS,OAAO,IAAI;AAGpB,UAAM,WAAW,MAAMA,kBAAmB,KAAK;AAAA,MAC7C,mBAAmB;AAAA,MACnB,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,UAAU;AAAA,IAChB,CAAK;AAGD,UAAM,iBAAiB,UAAU,6BAA6B;AAG9D,eAAW,sBAAsB;AAAA,MAC/B,gBAAgB;AAAA,IACtB,CAAK;AAAA,EACL,CAAG;AACH;;"}