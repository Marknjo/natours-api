{"version":3,"file":"updateUserPassword.js","sources":["../modules/updateUserPassword.js"],"sourcesContent":["import { asyncErrorWrapper } from '../utils/handleErrors';\r\nimport httpRequestsHelper, {\r\n  handleHttpErrors,\r\n} from '../utils/httpRequestsHelper';\r\nimport redirectTo from '../utils/redirectsHelper';\r\n\r\nconst updateUserPassword = formEl => {\r\n  asyncErrorWrapper(\r\n    async () => {\r\n      const getSubmitBtnEl = formEl.querySelector('.btn');\r\n\r\n      getSubmitBtnEl.innerText = 'Updating Password...';\r\n\r\n      // get form data\r\n      const formData = new FormData(formEl);\r\n      const passwordCurrent = formData.get('passwordCurrent');\r\n      const passwordConfirm = formData.get('passwordConfirm');\r\n      const password = formData.get('password');\r\n\r\n      // Validata user inputs\r\n      if (!password || !passwordConfirm || !passwordCurrent) {\r\n        throw new Error(\r\n          'One of the password fields is empty, ensure all fields have valid inputs'\r\n        );\r\n      }\r\n\r\n      // Prep send data\r\n      const url = '/api/v1/users/update-password';\r\n      const submitData = {\r\n        password,\r\n        passwordConfirm,\r\n        passwordCurrent,\r\n      };\r\n\r\n      // send form data\r\n      const response = await httpRequestsHelper(url, {\r\n        sendPlainResponse: true,\r\n        submitData,\r\n        requestMethod: 'PATCH',\r\n        dataType: 'normal',\r\n      });\r\n\r\n      // /// susccess response\r\n      await handleHttpErrors(response, 'Could not update your password!');\r\n\r\n      // // If no error\r\n      redirectTo('/sys-admin/profile', {\r\n        redirectOption: 'pageRefresh',\r\n      });\r\n    },\r\n    {},\r\n    {\r\n      displayPosition: 'right',\r\n      action: 'Invalid Inputs',\r\n    }\r\n  );\r\n};\r\n\r\nexport default updateUserPassword;\r\n"],"names":["httpRequestsHelper"],"mappings":";;AAMK,MAAC,qBAAqB,YAAU;AACnC,oBACE,YAAY;AACV,UAAM,iBAAiB,OAAO,cAAc,MAAM;AAElD,mBAAe,YAAY;AAG3B,UAAM,WAAW,IAAI,SAAS,MAAM;AACpC,UAAM,kBAAkB,SAAS,IAAI,iBAAiB;AACtD,UAAM,kBAAkB,SAAS,IAAI,iBAAiB;AACtD,UAAM,WAAW,SAAS,IAAI,UAAU;AAGxC,QAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,iBAAiB;AACrD,YAAM,IAAI,MACR,0EACV;AAAA,IACO;AAGD,UAAM,MAAM;AACZ,UAAM,aAAa;AAAA,MACjB;AAAA,MACA;AAAA,MACA;AAAA,IACR;AAGM,UAAM,WAAW,MAAMA,kBAAmB,KAAK;AAAA,MAC7C,mBAAmB;AAAA,MACnB;AAAA,MACA,eAAe;AAAA,MACf,UAAU;AAAA,IAClB,CAAO;AAGD,UAAM,iBAAiB,UAAU,iCAAiC;AAGlE,eAAW,sBAAsB;AAAA,MAC/B,gBAAgB;AAAA,IACxB,CAAO;AAAA,EACF,GACD,CAAE,GACF;AAAA,IACE,iBAAiB;AAAA,IACjB,QAAQ;AAAA,EACT,CACL;AACA;;"}