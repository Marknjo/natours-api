"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunknatours_review"] = self["webpackChunknatours_review"] || []).push([["loginModule"],{

/***/ "./public/js/modules/login.js":
/*!************************************!*\
  !*** ./public/js/modules/login.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_handleErrors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/handleErrors.js */ \"./public/js/utils/handleErrors.js\");\n/* harmony import */ var _utils_httpRequestsHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/httpRequestsHelper.js */ \"./public/js/utils/httpRequestsHelper.js\");\n/* harmony import */ var _utils_redirectsHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/redirectsHelper.js */ \"./public/js/utils/redirectsHelper.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n/**\r\n * Handles user login\r\n * @todo Add CSRF protection\r\n *\r\n * @param {String} formEl form DOM element\r\n */\n\nvar handleLogin = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (formEl) {\n    return (0,_utils_handleErrors_js__WEBPACK_IMPORTED_MODULE_0__.asyncErrorWrapper)( /*#__PURE__*/_asyncToGenerator(function* () {\n      // Handle form submit\n      // Form inputs\n      var formData = new FormData(formEl);\n      var email = formData.get('email');\n      var password = formData.get('password'); // Check if they are available before submiting\n\n      if (!email || !password) throw new Error('Email or Password missing'); // Submit data for processing\n\n      var submitUrl = '/api/v1/users/login';\n      var submitData = {\n        email,\n        password\n      };\n      var response = yield (0,_utils_httpRequestsHelper_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(submitUrl, {\n        submitData,\n        dataType: 'normal',\n        requestMethod: 'POST',\n        sendPlainResponse: true\n      }); /// Handle failed request\n\n      if (!response.ok) {\n        throw new Error('Login failed ðŸ˜¢ðŸ˜¢ðŸ˜¢');\n      } /// Handle errors from the server\n\n\n      yield (0,_utils_httpRequestsHelper_js__WEBPACK_IMPORTED_MODULE_1__.handleHttpErrors)(response, 'Login failed ðŸ˜¢ðŸ˜¢ðŸ˜¢'); /// Successful login -> Message handled by the server to survive redirect\n      // Redirect to /sys-admin\n      // TODO: Redirect /sys-admin\n\n      (0,_utils_redirectsHelper_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('/', {\n        redirectOption: 'disallowGoBack',\n        allowDelay: true\n      });\n    }));\n  });\n\n  return function handleLogin(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handleLogin);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvanMvbW9kdWxlcy9sb2dpbi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7O0FBUUE7QUFDQTtBQUNBOzs7QUFHQTtBQUdBO0FBQ0E7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQXRDQTtBQUFBO0FBQUE7QUFBQTs7QUF3Q0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uYXRvdXJzLXJldmlldy8uL3B1YmxpYy9qcy9tb2R1bGVzL2xvZ2luLmpzPzYzY2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNFcnJvcldyYXBwZXIsIGVycm9yV3JhcHBlciB9IGZyb20gJy4uL3V0aWxzL2hhbmRsZUVycm9ycy5qcyc7XHJcbmltcG9ydCBodHRwUmVxdWVzdEhlbHBlciwge1xyXG4gIGhhbmRsZUh0dHBFcnJvcnMsXHJcbn0gZnJvbSAnLi4vdXRpbHMvaHR0cFJlcXVlc3RzSGVscGVyLmpzJztcclxuaW1wb3J0IHJlZGlyZWN0VG8gZnJvbSAnLi4vdXRpbHMvcmVkaXJlY3RzSGVscGVyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHVzZXIgbG9naW5cclxuICogQHRvZG8gQWRkIENTUkYgcHJvdGVjdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZm9ybUVsIGZvcm0gRE9NIGVsZW1lbnRcclxuICovXHJcbmNvbnN0IGhhbmRsZUxvZ2luID0gYXN5bmMgZnVuY3Rpb24gKGZvcm1FbCkge1xyXG4gIHJldHVybiBhc3luY0Vycm9yV3JhcHBlcihhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBIYW5kbGUgZm9ybSBzdWJtaXRcclxuICAgIC8vIEZvcm0gaW5wdXRzXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtRWwpO1xyXG4gICAgY29uc3QgZW1haWwgPSBmb3JtRGF0YS5nZXQoJ2VtYWlsJyk7XHJcbiAgICBjb25zdCBwYXNzd29yZCA9IGZvcm1EYXRhLmdldCgncGFzc3dvcmQnKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGV5IGFyZSBhdmFpbGFibGUgYmVmb3JlIHN1Ym1pdGluZ1xyXG4gICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHRocm93IG5ldyBFcnJvcignRW1haWwgb3IgUGFzc3dvcmQgbWlzc2luZycpO1xyXG5cclxuICAgIC8vIFN1Ym1pdCBkYXRhIGZvciBwcm9jZXNzaW5nXHJcbiAgICBjb25zdCBzdWJtaXRVcmwgPSAnL2FwaS92MS91c2Vycy9sb2dpbic7XHJcbiAgICBjb25zdCBzdWJtaXREYXRhID0ge1xyXG4gICAgICBlbWFpbCxcclxuICAgICAgcGFzc3dvcmQsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaHR0cFJlcXVlc3RIZWxwZXIoc3VibWl0VXJsLCB7XHJcbiAgICAgIHN1Ym1pdERhdGEsXHJcbiAgICAgIGRhdGFUeXBlOiAnbm9ybWFsJyxcclxuICAgICAgcmVxdWVzdE1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBzZW5kUGxhaW5SZXNwb25zZTogdHJ1ZSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vLyBIYW5kbGUgZmFpbGVkIHJlcXVlc3RcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMb2dpbiBmYWlsZWQg8J+YovCfmKLwn5iiJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8vIEhhbmRsZSBlcnJvcnMgZnJvbSB0aGUgc2VydmVyXHJcbiAgICBhd2FpdCBoYW5kbGVIdHRwRXJyb3JzKHJlc3BvbnNlLCAnTG9naW4gZmFpbGVkIPCfmKLwn5ii8J+YoicpO1xyXG5cclxuICAgIC8vLyBTdWNjZXNzZnVsIGxvZ2luIC0+IE1lc3NhZ2UgaGFuZGxlZCBieSB0aGUgc2VydmVyIHRvIHN1cnZpdmUgcmVkaXJlY3RcclxuICAgIC8vIFJlZGlyZWN0IHRvIC9zeXMtYWRtaW5cclxuICAgIC8vIFRPRE86IFJlZGlyZWN0IC9zeXMtYWRtaW5cclxuICAgIHJlZGlyZWN0VG8oJy8nLCB7IHJlZGlyZWN0T3B0aW9uOiAnZGlzYWxsb3dHb0JhY2snLCBhbGxvd0RlbGF5OiB0cnVlIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlTG9naW47XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/js/modules/login.js\n");

/***/ }),

/***/ "./public/js/utils/redirectsHelper.js":
/*!********************************************!*\
  !*** ./public/js/utils/redirectsHelper.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n\n/**\r\n *  Manages redirects -> Assign, reloadpage, delayedRedicts, redirect without going back\r\n * @param {string} url\r\n * @param {{ allowDelay: boolean, delayPeriod: number, redirectOption: 'pageRefresh' | 'allowsGoBack' | 'disallowGoBack' }} configOptions A list of configaration options\r\n * @returns {Location} action to redict\r\n */\nvar redirectTo = function redirectTo(url) {\n  var configOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    directOption: '',\n    allowDelay: false,\n    delayPeriod: 10\n  };\n  // Initialize configurations\n  var {\n    allowDelay,\n    delayPeriod,\n    redirectOption\n  } = configOptions ? _objectSpread({\n    redirectOption: 'allowsGoBack',\n    delayPeriod: 10\n  }, configOptions) : {\n    allowDelay: false,\n    delayPeriod: 10,\n    redirectOption: 'allowsGoBack'\n  }; /// Handle delay cases\n\n  if (allowDelay) {\n    setTimeout(() => {\n      setRedirectOption(url, redirectOption);\n    }, delayPeriod * 1000);\n  } // No redirection -> select type of redirection\n\n\n  setRedirectOption(url, redirectOption);\n};\n/**\r\n *  Factory to Selects the ridirect option\r\n * @param {string} url Where to go\r\n * @param {'pageRefresh' | 'allowsGoBack' | 'disallowGoBack'} options Selects location reload, replace or assign methods\r\n * @returns {Location}\r\n */\n\n\nvar setRedirectOption = function setRedirectOption(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var redirectOption;\n\n  switch (options) {\n    case 'pageRefresh':\n      redirectOption = location.reload(url);\n      break;\n\n    case 'allowsGoBack':\n      redirectOption = location.assign(url);\n      break;\n\n    case 'disallowGoBack':\n      redirectOption = location.replace(url);\n      break;\n  }\n\n  return redirectOption;\n}; /// Export redirect\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (redirectTo);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvanMvdXRpbHMvcmVkaXJlY3RzSGVscGVyLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBSkE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFIQTs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQVhBOztBQWNBO0FBQ0E7OztBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmF0b3Vycy1yZXZpZXcvLi9wdWJsaWMvanMvdXRpbHMvcmVkaXJlY3RzSGVscGVyLmpzPzZlOTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy9cclxuXHJcbi8qKlxyXG4gKiAgTWFuYWdlcyByZWRpcmVjdHMgLT4gQXNzaWduLCByZWxvYWRwYWdlLCBkZWxheWVkUmVkaWN0cywgcmVkaXJlY3Qgd2l0aG91dCBnb2luZyBiYWNrXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcclxuICogQHBhcmFtIHt7IGFsbG93RGVsYXk6IGJvb2xlYW4sIGRlbGF5UGVyaW9kOiBudW1iZXIsIHJlZGlyZWN0T3B0aW9uOiAncGFnZVJlZnJlc2gnIHwgJ2FsbG93c0dvQmFjaycgfCAnZGlzYWxsb3dHb0JhY2snIH19IGNvbmZpZ09wdGlvbnMgQSBsaXN0IG9mIGNvbmZpZ2FyYXRpb24gb3B0aW9uc1xyXG4gKiBAcmV0dXJucyB7TG9jYXRpb259IGFjdGlvbiB0byByZWRpY3RcclxuICovXHJcbmNvbnN0IHJlZGlyZWN0VG8gPSBmdW5jdGlvbiAoXHJcbiAgdXJsLFxyXG4gIGNvbmZpZ09wdGlvbnMgPSB7XHJcbiAgICBkaXJlY3RPcHRpb246ICcnLFxyXG4gICAgYWxsb3dEZWxheTogZmFsc2UsXHJcbiAgICBkZWxheVBlcmlvZDogMTAsXHJcbiAgfVxyXG4pIHtcclxuICAvLyBJbml0aWFsaXplIGNvbmZpZ3VyYXRpb25zXHJcbiAgY29uc3QgeyBhbGxvd0RlbGF5LCBkZWxheVBlcmlvZCwgcmVkaXJlY3RPcHRpb24gfSA9IGNvbmZpZ09wdGlvbnNcclxuICAgID8ge1xyXG4gICAgICAgIHJlZGlyZWN0T3B0aW9uOiAnYWxsb3dzR29CYWNrJyxcclxuICAgICAgICBkZWxheVBlcmlvZDogMTAsXHJcbiAgICAgICAgLi4uY29uZmlnT3B0aW9ucyxcclxuICAgICAgfVxyXG4gICAgOiB7XHJcbiAgICAgICAgYWxsb3dEZWxheTogZmFsc2UsXHJcbiAgICAgICAgZGVsYXlQZXJpb2Q6IDEwLFxyXG4gICAgICAgIHJlZGlyZWN0T3B0aW9uOiAnYWxsb3dzR29CYWNrJyxcclxuICAgICAgfTtcclxuXHJcbiAgLy8vIEhhbmRsZSBkZWxheSBjYXNlc1xyXG4gIGlmIChhbGxvd0RlbGF5KSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc2V0UmVkaXJlY3RPcHRpb24odXJsLCByZWRpcmVjdE9wdGlvbik7XHJcbiAgICB9LCBkZWxheVBlcmlvZCAqIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgLy8gTm8gcmVkaXJlY3Rpb24gLT4gc2VsZWN0IHR5cGUgb2YgcmVkaXJlY3Rpb25cclxuICBzZXRSZWRpcmVjdE9wdGlvbih1cmwsIHJlZGlyZWN0T3B0aW9uKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiAgRmFjdG9yeSB0byBTZWxlY3RzIHRoZSByaWRpcmVjdCBvcHRpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBXaGVyZSB0byBnb1xyXG4gKiBAcGFyYW0geydwYWdlUmVmcmVzaCcgfCAnYWxsb3dzR29CYWNrJyB8ICdkaXNhbGxvd0dvQmFjayd9IG9wdGlvbnMgU2VsZWN0cyBsb2NhdGlvbiByZWxvYWQsIHJlcGxhY2Ugb3IgYXNzaWduIG1ldGhvZHNcclxuICogQHJldHVybnMge0xvY2F0aW9ufVxyXG4gKi9cclxuY29uc3Qgc2V0UmVkaXJlY3RPcHRpb24gPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zID0gJycpIHtcclxuICBsZXQgcmVkaXJlY3RPcHRpb247XHJcblxyXG4gIHN3aXRjaCAob3B0aW9ucykge1xyXG4gICAgY2FzZSAncGFnZVJlZnJlc2gnOlxyXG4gICAgICByZWRpcmVjdE9wdGlvbiA9IGxvY2F0aW9uLnJlbG9hZCh1cmwpO1xyXG4gICAgICBicmVhaztcclxuXHJcbiAgICBjYXNlICdhbGxvd3NHb0JhY2snOlxyXG4gICAgICByZWRpcmVjdE9wdGlvbiA9IGxvY2F0aW9uLmFzc2lnbih1cmwpO1xyXG4gICAgICBicmVhaztcclxuXHJcbiAgICBjYXNlICdkaXNhbGxvd0dvQmFjayc6XHJcbiAgICAgIHJlZGlyZWN0T3B0aW9uID0gbG9jYXRpb24ucmVwbGFjZSh1cmwpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcblxyXG4gIHJldHVybiByZWRpcmVjdE9wdGlvbjtcclxufTtcclxuXHJcbi8vLyBFeHBvcnQgcmVkaXJlY3RcclxuZXhwb3J0IGRlZmF1bHQgcmVkaXJlY3RUbztcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/js/utils/redirectsHelper.js\n");

/***/ })

}]);